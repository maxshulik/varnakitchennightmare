<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Varna Apartment - Appliance Selector</title>
    <style>
        :root {
            --bg: #fafafa;
            --card-bg: #ffffff;
            --text: #1a1a1a;
            --text-muted: #666;
            --border: #e5e5e5;
            --accent: #2563eb;
            --accent-hover: #1d4ed8;
            --selected-bg: #eff6ff;
            --selected-border: #2563eb;
            --price: #059669;
            --total-bg: #1a1a1a;
            --total-text: #ffffff;
            --rank-gold: #f59e0b;
            --rank-silver: #9ca3af;
            --rank-bronze: #d97706;
            --quoted-bg: #fef3c7;
            --quoted-border: #f59e0b;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg);
            color: var(--text);
            line-height: 1.5;
            padding-bottom: 80px;
        }

        .header {
            background: var(--card-bg);
            border-bottom: 1px solid var(--border);
            padding: 1rem;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header h1 { font-size: 1.25rem; font-weight: 600; margin-bottom: 0.25rem; }
        .header p { font-size: 0.875rem; color: var(--text-muted); }

        .container { max-width: 900px; margin: 0 auto; padding: 1rem; }

        .category {
            background: var(--card-bg);
            border: 1px solid var(--border);
            border-radius: 8px;
            margin-bottom: 1rem;
            overflow: hidden;
        }

        .category-header {
            padding: 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            user-select: none;
            transition: background 0.15s;
        }

        .category-header:hover { background: var(--bg); }

        .category-title {
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .category-title .icon { font-size: 1.25rem; }
        .category-selected { font-size: 0.875rem; color: var(--price); font-weight: 500; }
        .category-arrow { transition: transform 0.2s; color: var(--text-muted); }
        .category.open .category-arrow { transform: rotate(180deg); }
        .category-content { display: none; border-top: 1px solid var(--border); }
        .category.open .category-content { display: block; }
        .category-desc { padding: 0.75rem 1rem; color: var(--text-muted); font-size: 0.8125rem; border-bottom: 1px solid var(--border); }

        .top-picks {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            padding: 1rem;
            border-bottom: 1px solid var(--border);
        }

        .top-picks h4 { font-size: 0.8125rem; font-weight: 600; margin-bottom: 0.75rem; color: #92400e; }

        .pick-item {
            background: white;
            border-radius: 6px;
            padding: 0.75rem;
            margin-bottom: 0.5rem;
            font-size: 0.8125rem;
        }

        .pick-item:last-child { margin-bottom: 0; }

        .pick-header {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-weight: 600;
            margin-bottom: 0.25rem;
        }

        .pick-rank {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7rem;
            font-weight: 700;
            color: white;
        }

        .pick-rank.gold { background: var(--rank-gold); }
        .pick-rank.silver { background: var(--rank-silver); }
        .pick-rank.bronze { background: var(--rank-bronze); }

        .pick-reason { color: var(--text-muted); font-size: 0.75rem; line-height: 1.4; }

        .option {
            padding: 1rem;
            border-bottom: 1px solid var(--border);
            cursor: pointer;
            transition: background 0.15s;
        }

        .option:last-child { border-bottom: none; }
        .option:hover { background: var(--bg); }

        .option.selected {
            background: var(--selected-bg);
            border-left: 3px solid var(--selected-border);
            padding-left: calc(1rem - 3px);
        }

        .option.quoted {
            background: var(--quoted-bg);
            border-left: 3px solid var(--quoted-border);
            padding-left: calc(1rem - 3px);
        }

        .option.quoted.selected {
            background: linear-gradient(135deg, var(--quoted-bg) 0%, var(--selected-bg) 100%);
        }

        .option-main {
            display: flex;
            align-items: flex-start;
            gap: 0.75rem;
        }

        .option input[type="radio"] { margin-top: 0.25rem; accent-color: var(--accent); }

        .option-info { flex: 1; min-width: 0; }

        .option-header {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.25rem;
            flex-wrap: wrap;
        }

        .option-rank {
            background: var(--accent);
            color: white;
            font-size: 0.65rem;
            font-weight: 700;
            padding: 0.15rem 0.4rem;
            border-radius: 3px;
        }

        .option-rank.top1 { background: var(--rank-gold); }
        .option-rank.top2 { background: var(--rank-silver); }
        .option-rank.top3 { background: var(--rank-bronze); }

        .quoted-tag {
            background: var(--quoted-border);
            color: white;
            font-size: 0.6rem;
            font-weight: 700;
            padding: 0.15rem 0.4rem;
            border-radius: 3px;
            text-transform: uppercase;
        }

        .option-brand {
            font-size: 0.75rem;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .option-model { font-weight: 500; }
        .option-features { font-size: 0.8125rem; color: var(--text-muted); margin-top: 0.25rem; }

        .option-right { text-align: right; flex-shrink: 0; }
        .option-price { font-weight: 600; color: var(--price); font-size: 1rem; }
        .option-store { font-size: 0.75rem; color: var(--text-muted); margin-bottom: 0.5rem; }

        .option-link {
            display: inline-block;
            padding: 0.375rem 0.75rem;
            background: var(--accent);
            color: white;
            text-decoration: none;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 500;
            transition: background 0.15s;
        }

        .option-link:hover { background: var(--accent-hover); }

        .ratings {
            display: flex;
            gap: 0.5rem;
            margin-top: 0.5rem;
            flex-wrap: wrap;
        }

        .rating-badge {
            display: flex;
            align-items: center;
            gap: 0.25rem;
            background: #f3f4f6;
            padding: 0.2rem 0.4rem;
            border-radius: 4px;
            font-size: 0.65rem;
        }

        .rating-badge .label { color: var(--text-muted); }
        .rating-badge .score { font-weight: 600; color: var(--text); }

        .rating-stars {
            color: #f59e0b;
            font-size: 0.6rem;
            letter-spacing: -1px;
        }

        .total-bar {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: var(--total-bg);
            color: var(--total-text);
            padding: 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 100;
        }

        .total-label { font-size: 0.875rem; opacity: 0.8; }
        .total-amount { font-size: 1.5rem; font-weight: 700; }
        .total-count { font-size: 0.75rem; opacity: 0.6; }

        .skip-btn {
            padding: 0.5rem 1rem;
            background: transparent;
            border: 1px solid var(--border);
            border-radius: 4px;
            color: var(--text-muted);
            cursor: pointer;
            font-size: 0.8125rem;
            margin: 0.5rem 1rem 1rem;
        }

        .skip-btn:hover { background: var(--bg); }
        .skip-btn.active { background: var(--selected-bg); border-color: var(--selected-border); color: var(--text); }

        .legend {
            background: white;
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1rem;
            font-size: 0.8125rem;
        }

        .legend h3 { font-size: 0.875rem; margin-bottom: 0.5rem; }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.25rem;
        }

        .legend-color {
            width: 16px;
            height: 16px;
            border-radius: 3px;
        }

        .legend-color.quoted { background: var(--quoted-bg); border: 2px solid var(--quoted-border); }
        .legend-color.regular { background: white; border: 1px solid var(--border); }

        @media (max-width: 600px) {
            .option-main { flex-wrap: wrap; }
            .option-right {
                width: 100%;
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-top: 0.5rem;
                padding-left: 1.5rem;
            }
            .option-store { margin-bottom: 0; }
            .ratings { margin-top: 0.75rem; padding-left: 1.5rem; }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="container" style="padding: 0;">
            <h1>Varna Apartment Appliances</h1>
            <p>Prices verified Jan 2026 - sorted by recommendation</p>
        </div>
    </header>

    <main class="container" id="app">
        <div class="legend">
            <h3>Legend</h3>
            <div class="legend-item">
                <div class="legend-color quoted"></div>
                <span>Quoted by Tim Design (local company baseline)</span>
            </div>
            <div class="legend-item">
                <div class="legend-color regular"></div>
                <span>Other options from Bulgarian retailers</span>
            </div>
        </div>
    </main>

    <footer class="total-bar">
        <div>
            <div class="total-label">Total Estimate</div>
            <div class="total-count" id="selectedCount">0 of 9 selected</div>
        </div>
        <div class="total-amount" id="totalAmount">â‚¬0</div>
    </footer>

    <script>
        // CORRECTED PRICES - Verified Jan 2026 from Bulgarian retailers
        // Quoted items from Tim Design marked with isQuoted: true
        
        const applianceData = {
            refrigerator: {
                name: "Refrigerator",
                icon: "ðŸ§Š",
                description: "Freestanding, 60cm, ~200cm tall",
                topPicks: [
                    { rank: 1, name: "Liebherr CNsfd 5203 (QUOTED)", reason: "Best value from quote: Premium German brand, NoFrost, at competitive â‚¬655. 5-year warranty included. Excellent price-quality ratio from Tim Design." },
                    { rank: 2, name: "Bosch KGN397LEQ", reason: "Best retail value: German engineering, No Frost, Energy Class E at â‚¬638. Reliable brand with extended warranty option." },
                    { rank: 3, name: "LG GBB72MCVGN", reason: "Best technology: DoorCooling+ for even cooling, Linear Inverter (quietest compressor). Good mid-range option." }
                ],
                options: [
                    { id: "fridge-q1", rank: 1, brand: "Liebherr", model: "CNsfd 5203 Pure NoFrost", price: 655, store: "Tim Design Quote", url: "#", features: "330L, NoFrost, Energy C, 185cm, 5-year warranty", isQuoted: true, ratings: { reviews: 4.5, value: 5, features: 4, connectivity: 2, efficiency: 4 } },
                    { id: "fridge-1", rank: 2, brand: "Bosch", model: "KGN397LEQ", price: 638, store: "Technopolis", url: "https://www.technopolis.bg/en/Hladilnici-s-dolen-frizer/Hladilnik-s-dolen-frizer-BOSCH-KGN397LEQ/p/662813", features: "368L, No Frost, Energy E, 203cm", ratings: { reviews: 4.5, value: 5, features: 4, connectivity: 2, efficiency: 3 } },
                    { id: "fridge-2", rank: 3, brand: "LG", model: "GBB72MCVGN", price: 720, store: "Technopolis", url: "https://www.technopolis.bg/search?text=GBB72MCVGN", features: "384L, DoorCooling+, Linear Inverter, No Frost", ratings: { reviews: 4.5, value: 4, features: 5, connectivity: 3, efficiency: 4 } },
                    { id: "fridge-3", rank: 4, brand: "LG", model: "GTBV38PZGKD", price: 577, store: "Technopolis", url: "https://www.technopolis.bg/en/Hladilnici-s-goren-frizer/Hladilnik-s-goren-frizer-LG-GTBV38PZGKD/p/660258", features: "360L, Top freezer, 172cm, Budget option", ratings: { reviews: 4, value: 5, features: 3, connectivity: 2, efficiency: 4 } },
                    { id: "fridge-4", rank: 5, brand: "Samsung", model: "RB34C7B5E22/EF", price: 750, store: "Technopolis", url: "https://www.technopolis.bg/en/Hladilnici-s-dolen-frizer/Hladilnik-s-dolen-frizer-SAMSUNG-RB34C7B5E22-EF/p/652536", features: "344L, Total No Frost, Inverter, 185cm", ratings: { reviews: 4, value: 4, features: 4, connectivity: 3, efficiency: 4 } },
                    { id: "fridge-5", rank: 6, brand: "Bosch", model: "KGV58VLEAS", price: 704, store: "Technopolis", url: "https://www.technopolis.bg/en/Hladilnici-s-dolen-frizer/Hladilnik-s-dolen-frizer-BOSCH-KGV58VLEAS/p/662830", features: "503L, 70cm wide, 191cm, Large capacity", ratings: { reviews: 4, value: 4, features: 3, connectivity: 2, efficiency: 3 } },
                    { id: "fridge-6", rank: 7, brand: "Liebherr", model: "CNdgc 5203", price: 562, store: "Technopolis", url: "https://www.technopolis.bg/en/Hladilnici-s-dolen-frizer/Hladilnik-s-dolen-frizer-LIEBHERR-CNdgc-5203/p/654343", features: "330L, Semi No Frost, 185cm", ratings: { reviews: 4, value: 5, features: 3, connectivity: 2, efficiency: 4 } },
                    { id: "fridge-7", rank: 8, brand: "Samsung", model: "BRB80F26BDF0EO", price: 945, store: "Technopolis", url: "https://www.technopolis.bg/en/Hladilnici-za-vgrazhdane/Hladilnik-za-vgrazhdane-SAMSUNG-BRB80F26BDF0EO/p/653862", features: "264L, Built-in, 177cm", ratings: { reviews: 4, value: 3, features: 4, connectivity: 4, efficiency: 4 } },
                    { id: "fridge-8", rank: 9, brand: "Samsung", model: "RB38C7AGWS9/EF", price: 1474, store: "eMAG", url: "https://www.emag.bg/hladilnik-samsung-387-l-no-frost-klas-a-twin-metal-cooling-digital-inverter-smart-things-wifi-ai-energy-h-203-sm-inox-rb38c7agws9-ef/pd/D1B8F1YBM/", features: "387L, WiFi, AI Energy, Class A, Premium", ratings: { reviews: 4.5, value: 2, features: 5, connectivity: 5, efficiency: 5 } },
                    { id: "fridge-9", rank: 10, brand: "Bosch", model: "KAG93AIEP", price: 1942, store: "Technopolis", url: "https://www.technopolis.bg/en/Hladilnici-Side-by-Side/Hladilnik-BOSCH-KAG93AIEP/p/662819", features: "560L, Side-by-Side, Ice/Water dispenser", ratings: { reviews: 4.5, value: 2, features: 5, connectivity: 3, efficiency: 3 } }
                ]
            },
            cooktop: {
                name: "Cooktop",
                icon: "ðŸ”¥",
                description: "Built-in, 60cm (Induction recommended, ceramic quoted)",
                topPicks: [
                    { rank: 1, name: "Bosch PIF672FB1E", reason: "Best induction value: 4 zones, touch control, 17 power levels at reasonable â‚¬430. Bosch reliability." },
                    { rank: 2, name: "Electrolux LHR3233CK (QUOTED - Ceramic)", reason: "Budget baseline from quote: Ceramic/radiant at only â‚¬175. Good if induction not required." },
                    { rank: 3, name: "Beko HII 64401 QT", reason: "Best budget induction: Full induction at only â‚¬256. Great entry point for induction cooking." }
                ],
                options: [
                    { id: "cooktop-1", rank: 1, brand: "Bosch", model: "PIF672FB1E", price: 430, store: "Technopolis", url: "https://www.technopolis.bg/search?text=PIF672FB1E", features: "60cm, Induction, 4 zones, TouchSelect, 17 power levels", ratings: { reviews: 4.5, value: 5, features: 5, connectivity: 2, efficiency: 5 } },
                    { id: "cooktop-q1", rank: 2, brand: "Electrolux", model: "LHR3233CK", price: 175, store: "Tim Design Quote", url: "#", features: "60cm, CERAMIC (not induction), 4 zones, Budget", isQuoted: true, ratings: { reviews: 3.5, value: 5, features: 2, connectivity: 1, efficiency: 3 } },
                    { id: "cooktop-2", rank: 3, brand: "Beko", model: "HII 64401 QT", price: 256, store: "Technopolis", url: "https://www.technopolis.bg/search?text=HII%2064401", features: "59cm, Induction, 4 zones, Touch control, Timer", ratings: { reviews: 4, value: 5, features: 4, connectivity: 1, efficiency: 5 } },
                    { id: "cooktop-3", rank: 4, brand: "Whirlpool", model: "WS Q2160 NE", price: 389, store: "Technopolis", url: "https://www.technopolis.bg/en/Plotove-za-vgrazhdane/Indukcionen-Plot-za-vgrazhdane-WHIRLPOOL-WS-Q2160-NE/p/650495", features: "59cm, Induction, 4 zones, Touch control", ratings: { reviews: 4, value: 4, features: 4, connectivity: 1, efficiency: 5 } },
                    { id: "cooktop-4", rank: 5, brand: "AEG", model: "IKE64450XB", price: 430, store: "Technopolis", url: "https://www.technopolis.bg/search?text=IKE64450XB", features: "60cm, Induction, MaxiSense, Bridge function", ratings: { reviews: 4, value: 4, features: 4, connectivity: 2, efficiency: 5 } },
                    { id: "cooktop-5", rank: 6, brand: "Bosch", model: "PIF 672FB1E", price: 430, store: "Technopolis", url: "https://www.technopolis.bg/search?text=PIF%20672FB1E", features: "60cm, Induction, DirectSelect", ratings: { reviews: 4.5, value: 4, features: 5, connectivity: 2, efficiency: 5 } },
                    { id: "cooktop-6", rank: 7, brand: "Electrolux", model: "EIS67453", price: 705, store: "Technopolis", url: "https://www.technopolis.bg/en/Plotove-za-vgrazhdane/Plot-za-vgrazhdane-ELECTROLUX-EIS67453/p/654593", features: "59cm, Induction, 4 zones, Premium", ratings: { reviews: 4, value: 3, features: 5, connectivity: 2, efficiency: 5 } },
                    { id: "cooktop-7", rank: 8, brand: "Siemens", model: "EU631FEB1E", price: 480, store: "Technopolis", url: "https://www.technopolis.bg/search?text=EU631FEB1E", features: "60cm, Induction, iQ100, TouchControl", ratings: { reviews: 4, value: 4, features: 4, connectivity: 2, efficiency: 5 } },
                    { id: "cooktop-8", rank: 9, brand: "Samsung", model: "NZ64B5045GK", price: 520, store: "eMAG", url: "https://www.emag.bg/search/Samsung%20NZ64B5045GK", features: "60cm, Induction, Virtual Flame, Flex Zone", ratings: { reviews: 4, value: 3, features: 5, connectivity: 4, efficiency: 5 } },
                    { id: "cooktop-9", rank: 10, brand: "Bosch", model: "PXE675DC1E", price: 750, store: "Technopolis", url: "https://www.technopolis.bg/search?text=PXE675DC1E", features: "60cm, FlexInduction, Premium", ratings: { reviews: 4.5, value: 3, features: 5, connectivity: 2, efficiency: 5 } }
                ]
            },
            hood: {
                name: "Cooker Hood",
                icon: "ðŸ’¨",
                description: "Built-in/Telescopic, 60cm",
                topPicks: [
                    { rank: 1, name: "Electrolux LFG525S (QUOTED)", reason: "Best value from quote: â‚¬189 (sale) for built-in hood. Sufficient for normal cooking. 5-year warranty." },
                    { rank: 2, name: "Bosch DLN56AC60", reason: "Best power: 570mÂ³/h airflow, Energy class B, LED. German quality at â‚¬332." },
                    { rank: 3, name: "Elica ELITE 14 LUX", reason: "Best budget: Telescopic design, 304mÂ³/h, glass panel at only â‚¬117." }
                ],
                options: [
                    { id: "hood-q1", rank: 1, brand: "Electrolux", model: "LFG525S", price: 189, store: "Tim Design Quote", url: "#", features: "60cm, Built-in, 5-year warranty", isQuoted: true, ratings: { reviews: 4, value: 5, features: 3, connectivity: 1, efficiency: 4 } },
                    { id: "hood-1", rank: 2, brand: "Bosch", model: "DLN56AC60", price: 332, store: "Technopolis", url: "https://www.technopolis.bg/en/Absorbatori-za-palno-vgrazhdane/Absorbator-BOSCH-DLN56AC60/p/653825", features: "52cm, 570mÂ³/h, Class B, 66dB, LED", ratings: { reviews: 4.5, value: 4, features: 4, connectivity: 2, efficiency: 4 } },
                    { id: "hood-2", rank: 3, brand: "Elica", model: "ELITE 14 LUX GRVT/A/60", price: 117, store: "Technopolis", url: "https://www.technopolis.bg/en/Teleskopichni-absorbatori/Absorbator-ELICA-ELITE-14-LUX-GRVT-A-60/p/651377", features: "60cm, Telescopic, 304mÂ³/h, Class D, Glass", ratings: { reviews: 4, value: 5, features: 3, connectivity: 1, efficiency: 3 } },
                    { id: "hood-3", rank: 4, brand: "Elica", model: "MISSY LX IX/A/60", price: 112, store: "Technopolis", url: "https://www.technopolis.bg/en/Absorbatori-za-stenen-montazh/Absorbator-ELICA-MISSY-LX-IX-A-60/p/651380", features: "60cm, Wall-mount, 395mÂ³/h, Class D", ratings: { reviews: 3.5, value: 5, features: 3, connectivity: 1, efficiency: 3 } },
                    { id: "hood-4", rank: 5, brand: "Elica", model: "FLAT GLASS IX/A/60", price: 194, store: "Technopolis", url: "https://www.technopolis.bg/en/Absorbatori-za-stenen-montazh/Absorbator-ELICA-FLAT-GLASS-IX-A-60/p/651379", features: "60cm, T-shape, 368mÂ³/h, Class D", ratings: { reviews: 3.5, value: 4, features: 3, connectivity: 1, efficiency: 3 } },
                    { id: "hood-5", rank: 6, brand: "Jetair", model: "AURORA LX GRIX/A/60", price: 180, store: "Technopolis", url: "https://www.technopolis.bg/en/Teleskopichni-absorbatori/Absorbator-JETAIR-AURORA-LX-GRIX-A-60/p/653237", features: "60cm, Telescopic, Budget option", ratings: { reviews: 3.5, value: 4, features: 3, connectivity: 1, efficiency: 3 } },
                    { id: "hood-6", rank: 7, brand: "Bosch", model: "DFR067A52", price: 373, store: "Technopolis", url: "https://www.technopolis.bg/en/Teleskopichni-absorbatori/Absorbator-BOSCH-DFR067A52/p/650075", features: "60cm, 399mÂ³/h, Class A, 53dB, LED", ratings: { reviews: 4.5, value: 4, features: 4, connectivity: 2, efficiency: 5 } },
                    { id: "hood-7", rank: 8, brand: "Elica", model: "VERVE WH/F/60", price: 72, store: "Technopolis", url: "https://www.technopolis.bg/en/Absorbatori-za-stenen-montazh/Absorbator-ELICA-VERVE-WH-F-60/p/651375", features: "60cm, 205mÂ³/h, Class C, Budget", ratings: { reviews: 3, value: 4, features: 2, connectivity: 1, efficiency: 2 } },
                    { id: "hood-8", rank: 9, brand: "Siemens", model: "LI67SA531", price: 420, store: "Technopolis", url: "https://www.technopolis.bg/search?text=LI67SA531", features: "60cm, 740mÂ³/h, Class A, iQ300", ratings: { reviews: 4.5, value: 3, features: 4, connectivity: 2, efficiency: 5 } },
                    { id: "hood-9", rank: 10, brand: "Neff", model: "I98WMM1S5", price: 2146, store: "Technopolis", url: "https://www.technopolis.bg/en/Absorbatori-za-palno-vgrazhdane/Absorbator-NEFF-I98WMM1S5/p/650017", features: "90cm, 519mÂ³/h, Premium, Class A", ratings: { reviews: 4.5, value: 2, features: 5, connectivity: 3, efficiency: 5 } }
                ]
            },
            oven: {
                name: "Built-in Oven",
                icon: "ðŸ³",
                description: "Built-in, 60cm",
                topPicks: [
                    { rank: 1, name: "Electrolux EOD5F71Z (QUOTED)", reason: "Best value from quote: â‚¬419 (sale) with 5-year warranty. Solid Electrolux quality at great price." },
                    { rank: 2, name: "Electrolux EOD3H70X", reason: "Best budget retail: 72L, A class, telescopic shelves at â‚¬358. Good basic oven." },
                    { rank: 3, name: "AEG BPS351161M", reason: "Best with pyrolytic: Self-cleaning at â‚¬485. Worth the upgrade for easy maintenance." }
                ],
                options: [
                    { id: "oven-q1", rank: 1, brand: "Electrolux", model: "EOD5F71Z", price: 419, store: "Tim Design Quote", url: "#", features: "72L, A+, 5-year warranty, Sale price", isQuoted: true, ratings: { reviews: 4, value: 5, features: 4, connectivity: 2, efficiency: 5 } },
                    { id: "oven-1", rank: 2, brand: "Electrolux", model: "EOD3H70X", price: 358, store: "Technopolis", url: "https://www.technopolis.bg/en/Furni-za-vgrazhdane/Furna-za-vgrazhdane-ELECTROLUX-EOD3H70X/p/707651", features: "72L, A, Telescopic shelves", ratings: { reviews: 4, value: 5, features: 3, connectivity: 2, efficiency: 4 } },
                    { id: "oven-2", rank: 3, brand: "AEG", model: "BPS351161M", price: 485, store: "Technopolis", url: "https://www.technopolis.bg/en/Furni-za-vgrazhdane/Furna-za-vgrazhdane-AEG-BPS351161M/p/652313", features: "72L, A+, Pyrolytic, Telescopic shelves", ratings: { reviews: 4.5, value: 5, features: 4, connectivity: 2, efficiency: 5 } },
                    { id: "oven-3", rank: 4, brand: "Electrolux", model: "EOE8P39V", price: 486, store: "Technopolis", url: "https://www.technopolis.bg/en/Furni-za-vgrazhdane/Furna-za-vgrazhdane-ELECTROLUX-EOE8P39V/p/650003", features: "72L, A+, Pyrolytic, Soft close", ratings: { reviews: 4, value: 4, features: 4, connectivity: 2, efficiency: 5 } },
                    { id: "oven-4", rank: 5, brand: "Electrolux", model: "EOD5F70BX", price: 358, store: "Technopolis", url: "https://www.technopolis.bg/en/Furni-za-vgrazhdane/Furna-za-vgrazhdane-ELECTROLUX-EOD5F70BX/p/653275", features: "65L, A, Basic model", ratings: { reviews: 4, value: 5, features: 3, connectivity: 2, efficiency: 4 } },
                    { id: "oven-5", rank: 6, brand: "AEG", model: "OA5CB31SM", price: 536, store: "Technopolis", url: "https://www.technopolis.bg/en/Furni-za-vgrazhdane/Furna-za-vgrazhdane-AEG-OA5CB31SM/p/653973", features: "72L, A, Telescopic shelves", ratings: { reviews: 4, value: 4, features: 4, connectivity: 2, efficiency: 4 } },
                    { id: "oven-6", rank: 7, brand: "Electrolux", model: "LOD8P39Z", price: 689, store: "Technopolis", url: "https://www.technopolis.bg/en/Furni-za-vgrazhdane/Furna-za-vgrazhdane-ELECTROLUX-LOD8P39Z/p/653985", features: "72L, A+, Pyrolytic, Premium", ratings: { reviews: 4.5, value: 3, features: 5, connectivity: 3, efficiency: 5 } },
                    { id: "oven-7", rank: 8, brand: "Bosch", model: "HBG536EW3", price: 550, store: "Technopolis", url: "https://www.technopolis.bg/en/Furni-za-vgrazhdane/Furna-za-vgrazhdane-BOSCH-HBG536EW3/p/653647", features: "71L, A+, Soft close, 7 modes", ratings: { reviews: 4.5, value: 4, features: 4, connectivity: 2, efficiency: 5 } },
                    { id: "oven-8", rank: 9, brand: "Bosch", model: "HRG532BB3", price: 731, store: "Technopolis", url: "https://www.technopolis.bg/en/Furni-za-vgrazhdane/Furna-za-vgrazhdane-BOSCH-HRG532BB3/p/653630", features: "71L, A+, Steam, Premium", ratings: { reviews: 4.5, value: 3, features: 5, connectivity: 3, efficiency: 5 } },
                    { id: "oven-9", rank: 10, brand: "Bosch", model: "HBG539EB3", price: 705, store: "Technopolis", url: "https://www.technopolis.bg/search?text=HBG539EB3", features: "71L, A+, Telescopic, Soft close", ratings: { reviews: 4.5, value: 3, features: 5, connectivity: 2, efficiency: 5 } }
                ]
            },
            dishwasher: {
                name: "Dishwasher",
                icon: "ðŸ½ï¸",
                description: "Built-in, 60cm, 14 place settings",
                topPicks: [
                    { rank: 1, name: "Electrolux EES48200L (QUOTED)", reason: "Best value from quote: â‚¬469 (sale) with 5-year warranty. Electrolux reliability at great price." },
                    { rank: 2, name: "Gorenje GV642D65", reason: "Best budget retail: â‚¬307 for 14 settings, Class D. 7-year warranty from Beko alternative." },
                    { rank: 3, name: "Bosch SMV6ECX10E", reason: "Best premium: Class A, Inverter, 42dB quiet, Auto door at â‚¬833. Worth it for efficiency." }
                ],
                options: [
                    { id: "dish-q1", rank: 1, brand: "Electrolux", model: "EES48200L", price: 469, store: "Tim Design Quote", url: "#", features: "14 settings, 5-year warranty, Sale price", isQuoted: true, ratings: { reviews: 4, value: 5, features: 4, connectivity: 2, efficiency: 4 } },
                    { id: "dish-1", rank: 2, brand: "Gorenje", model: "GV642D65", price: 307, store: "Technopolis", url: "https://www.technopolis.bg/en/Sadomiyalni-za-vgrazhdane/Sadomiyalna-za-vgrazhdane-GORENJE-GV642D65/p/654107", features: "14 settings, Class D, 6 programmes", ratings: { reviews: 4, value: 5, features: 3, connectivity: 1, efficiency: 3 } },
                    { id: "dish-2", rank: 3, brand: "Beko", model: "BDIN 14320", price: 307, store: "Technopolis", url: "https://www.technopolis.bg/en/Sadomiyalni-za-vgrazhdane/Sadomiyalna-za-vgrazhdane-BEKO-BDIN-14320/p/680749", features: "13 settings, Class E, 7-year warranty", ratings: { reviews: 3.5, value: 5, features: 3, connectivity: 1, efficiency: 2 } },
                    { id: "dish-3", rank: 4, brand: "Bosch", model: "SMV4HVX14E", price: 572, store: "Technopolis", url: "https://www.technopolis.bg/en/Sadomiyalni-za-vgrazhdane/Sadomiyalna-za-vgrazhdane-BOSCH-SMV4HVX14E/p/654660", features: "14 settings, Class C, WiFi, 46dB", ratings: { reviews: 4, value: 4, features: 4, connectivity: 4, efficiency: 3 } },
                    { id: "dish-4", rank: 5, brand: "Bosch", model: "SMV6ECX10E", price: 833, store: "Technopolis", url: "https://www.technopolis.bg/en/Sadomiyalni-za-vgrazhdane/Sadomiyalna-za-vgrazhdane-BOSCH-SMV6ECX10E/p/653335", features: "14 settings, Class A, Inverter, 42dB, Auto door", ratings: { reviews: 4.5, value: 4, features: 5, connectivity: 3, efficiency: 5 } },
                    { id: "dish-5", rank: 6, brand: "Electrolux", model: "EEM69410L", price: 700, store: "Technopolis", url: "https://www.technopolis.bg/search?text=EEM69410L", features: "15 settings, Class A, MaxiFlex", ratings: { reviews: 4, value: 4, features: 4, connectivity: 2, efficiency: 5 } },
                    { id: "dish-6", rank: 7, brand: "Neff", model: "S155ECX00E", price: 880, store: "Technopolis", url: "https://www.technopolis.bg/en/Sadomiyalni-za-vgrazhdane/Sadomiyalna-za-vgrazhdane-NEFF-S155ECX00E/p/652392", features: "14 settings, Class A, TimeLight", ratings: { reviews: 4.5, value: 3, features: 5, connectivity: 3, efficiency: 5 } },
                    { id: "dish-7", rank: 8, brand: "AEG", model: "FSE83837P", price: 820, store: "Technopolis", url: "https://www.technopolis.bg/search?text=FSE83837P", features: "14 settings, Class A, ComfortLift", ratings: { reviews: 4, value: 3, features: 5, connectivity: 2, efficiency: 5 } },
                    { id: "dish-8", rank: 9, brand: "Bosch", model: "SMV6YCX05E", price: 920, store: "Technopolis", url: "https://www.technopolis.bg/en/Sadomiyalni-za-vgrazhdane/Sadomiyalna-za-vgrazhdane-BOSCH-SMV6YCX05E/p/652077", features: "14 settings, Class A, Zeolith drying", ratings: { reviews: 4.5, value: 3, features: 5, connectivity: 3, efficiency: 5 } },
                    { id: "dish-9", rank: 10, brand: "Siemens", model: "SN65ZX07CE", price: 950, store: "eMAG", url: "https://www.emag.bg/search/Siemens%20SN65ZX07CE", features: "14 settings, Class A, Premium", ratings: { reviews: 4.5, value: 2, features: 5, connectivity: 3, efficiency: 5 } }
                ]
            },
            washerDryer: {
                name: "Washer-Dryer Combo",
                icon: "ðŸ‘•",
                description: "Combined unit, ~10kg wash / 6kg dry",
                topPicks: [
                    { rank: 1, name: "LG F4DR510S2M", reason: "Best overall: AI DD fabric detection, 10kg/6kg, excellent reviews at â‚¬715. Best washing performance." },
                    { rank: 2, name: "Electrolux EW7W2682E (QUOTED)", reason: "Good value from quote: â‚¬789 with 5-year warranty. Solid mid-range option." },
                    { rank: 3, name: "Samsung WD90DG6G94BKU4", reason: "Best features: Steam, Ecobubble, WiFi at â‚¬792. Slightly less capacity but great tech." }
                ],
                options: [
                    { id: "wd-1", rank: 1, brand: "LG", model: "F4DR510S2M", price: 715, store: "Technopolis", url: "https://www.technopolis.bg/en/Peralni-sas-sushilni/Peralnya-sas-Sushilnya-LG-F4DR510S2M/p/652143", features: "10kg/6kg, 1400rpm, AI DD, Inverter", ratings: { reviews: 4.5, value: 5, features: 5, connectivity: 4, efficiency: 4 } },
                    { id: "wd-q1", rank: 2, brand: "Electrolux", model: "EW7W2682E", price: 789, store: "Tim Design Quote", url: "#", features: "8kg/4kg, 5-year warranty", isQuoted: true, ratings: { reviews: 4, value: 4, features: 4, connectivity: 3, efficiency: 4 } },
                    { id: "wd-2", rank: 3, brand: "Samsung", model: "WD90DG6G94BKU4", price: 792, store: "Technopolis", url: "https://www.technopolis.bg/en/Peralni-sas-sushilni/Peralnya-sas-Sushilnya-SAMSUNG-WD90DG6G94BKU4/p/654074", features: "9kg/6kg, 1400rpm, Steam, WiFi", ratings: { reviews: 4, value: 4, features: 5, connectivity: 5, efficiency: 4 } },
                    { id: "wd-3", rank: 4, brand: "Electrolux", model: "EW7W4492E", price: 833, store: "Technopolis", url: "https://www.technopolis.bg/en/Peralni-sas-sushilni/Peralnya-sas-Sushilnya-ELECTROLUX-EW7W4492E/p/653269", features: "9kg/5kg, 1400rpm, Steam program", ratings: { reviews: 4, value: 4, features: 4, connectivity: 3, efficiency: 4 } },
                    { id: "wd-4", rank: 5, brand: "Samsung", model: "WD11DB8B85GBU4", price: 940, store: "Technopolis", url: "https://www.technopolis.bg/en/Peralni-sas-sushilni/Peralnya-sas-Sushilnya-SAMSUNG-WD11DB8B85GBU4/p/653618", features: "11kg/6kg, 1400rpm, AI Ecobubble", ratings: { reviews: 4, value: 3, features: 5, connectivity: 5, efficiency: 4 } },
                    { id: "wd-5", rank: 6, brand: "Bosch", model: "WNG254A0BY", price: 1073, store: "Technopolis", url: "https://www.technopolis.bg/en/Peralni-sas-sushilni/Peralnya-sas-Sushilnya-BOSCH-WNG254A0BY/p/652647", features: "10kg/6kg, 1400rpm, AutoDry, Iron Assist", ratings: { reviews: 4.5, value: 3, features: 5, connectivity: 3, efficiency: 4 } },
                    { id: "wd-6", rank: 7, brand: "Candy", model: "ROW4966DWMCE", price: 620, store: "Technopolis", url: "https://www.technopolis.bg/search?text=ROW4966DWMCE", features: "9kg/6kg, 1400rpm, WiFi, Budget", ratings: { reviews: 3.5, value: 4, features: 4, connectivity: 4, efficiency: 3 } },
                    { id: "wd-7", rank: 8, brand: "Whirlpool", model: "FWDG97168WS", price: 700, store: "Technopolis", url: "https://www.technopolis.bg/search?text=FWDG97168WS", features: "9kg/6kg, 1600rpm, FreshCare+", ratings: { reviews: 3.5, value: 4, features: 3, connectivity: 2, efficiency: 4 } },
                    { id: "wd-8", rank: 9, brand: "AEG", model: "L7WBG68W", price: 920, store: "Technopolis", url: "https://www.technopolis.bg/search?text=L7WBG68W", features: "8kg/4kg, 1600rpm, DualSense", ratings: { reviews: 4, value: 3, features: 4, connectivity: 3, efficiency: 4 } },
                    { id: "wd-9", rank: 10, brand: "Siemens", model: "WN54G2A0BY", price: 1100, store: "Technopolis", url: "https://www.technopolis.bg/search?text=WN54G2A0BY", features: "10kg/6kg, 1400rpm, speedPack", ratings: { reviews: 4, value: 2, features: 4, connectivity: 3, efficiency: 4 } }
                ]
            },
            microwave: {
                name: "Microwave",
                icon: "ðŸ“»",
                description: "Built-in or Freestanding, 20-32L",
                topPicks: [
                    { rank: 1, name: "LG MS2042D", reason: "Best budget freestanding: Only â‚¬102 for 20L, 700W. Simple and effective." },
                    { rank: 2, name: "Electrolux LMS4253TMK (QUOTED - Built-in)", reason: "From quote: â‚¬369 built-in microwave. Integrates with kitchen, 5-year warranty." },
                    { rank: 3, name: "Bosch FFL023MW0", reason: "Best mid-range: â‚¬143 for 20L, 800W, AutoPilot programs. German quality." }
                ],
                options: [
                    { id: "micro-1", rank: 1, brand: "LG", model: "MS2042D", price: 102, store: "Technopolis", url: "https://www.technopolis.bg/en/Mikrovalnovi-furni/Mikrovalnova-furna-LG-MS2042D/p/800516", features: "20L, 700W, Freestanding, Budget", ratings: { reviews: 4, value: 5, features: 2, connectivity: 1, efficiency: 3 } },
                    { id: "micro-q1", rank: 2, brand: "Electrolux", model: "LMS4253TMK", price: 369, store: "Tim Design Quote", url: "#", features: "25L, BUILT-IN, 5-year warranty", isQuoted: true, ratings: { reviews: 4, value: 4, features: 4, connectivity: 2, efficiency: 4 } },
                    { id: "micro-2", rank: 3, brand: "Bosch", model: "FFL023MW0", price: 143, store: "Technopolis", url: "https://www.technopolis.bg/en/Mikrovalnovi-furni/Mikrovalnova-furna-BOSCH-FFL023MW0/p/803850", features: "20L, 800W, AutoPilot, LED", ratings: { reviews: 4, value: 5, features: 3, connectivity: 2, efficiency: 4 } },
                    { id: "micro-3", rank: 4, brand: "Midea", model: "MMO-AM25VB", price: 102, store: "Technopolis", url: "https://www.technopolis.bg/en/Mikrovalnovi-furni/Mikrovalnova-furna-MIDEA-MMO-AM25VB-BK-/p/802953", features: "25L, 900W, Grill, Budget", ratings: { reviews: 3.5, value: 5, features: 3, connectivity: 1, efficiency: 3 } },
                    { id: "micro-4", rank: 5, brand: "Panasonic", model: "NN-E22JMMEPG", price: 117, store: "Technopolis", url: "https://www.technopolis.bg/search?text=NN-E22JMMEPG", features: "20L, 800W, Compact", ratings: { reviews: 4, value: 5, features: 3, connectivity: 1, efficiency: 4 } },
                    { id: "micro-5", rank: 6, brand: "Samsung", model: "MS32DG4504ATE", price: 138, store: "Technopolis", url: "https://www.technopolis.bg/en/Mikrovalnovi-furni/Mikrovalnova-furna-SAMSUNG-MS32DG4504ATE/p/802859", features: "32L, 1500W, Ceramic interior", ratings: { reviews: 4.5, value: 5, features: 4, connectivity: 2, efficiency: 4 } },
                    { id: "micro-6", rank: 7, brand: "LG", model: "MH6565DIS", price: 180, store: "eMAG", url: "https://www.emag.bg/search/LG%20MH6565DIS", features: "25L, 1000W, Smart Inverter, Grill", ratings: { reviews: 4, value: 4, features: 4, connectivity: 3, efficiency: 5 } },
                    { id: "micro-7", rank: 8, brand: "Electrolux", model: "EMS4253TEX", price: 280, store: "Technopolis", url: "https://www.technopolis.bg/en/Mikrovalnovi-za-vgrazhdane/Mikrovalnova-za-vgrazhdane-ELECTROLUX-EMS4253TEX/p/707660", features: "25L, Built-in, Grill", ratings: { reviews: 4, value: 3, features: 4, connectivity: 2, efficiency: 4 } },
                    { id: "micro-8", rank: 9, brand: "Panasonic", model: "NN-GT45KWSUG", price: 256, store: "Technopolis", url: "https://www.technopolis.bg/en/Mikrovalnovi-furni/Mikrovalnova-furna-PANASONIC-NN-GT45KWSUG/p/801534", features: "31L, 1000W, Grill, Inverter", ratings: { reviews: 4.5, value: 4, features: 5, connectivity: 2, efficiency: 5 } },
                    { id: "micro-9", rank: 10, brand: "Samsung", model: "MG30T5018UE", price: 210, store: "Technopolis", url: "https://www.technopolis.bg/en/Mikrovalnovi-furni/Mikrovalnova-furna-SAMSUNG-BESPOKE-MG30T5018UE/p/800170", features: "30L, 900W, Grill, Bespoke", ratings: { reviews: 4, value: 3, features: 4, connectivity: 2, efficiency: 4 } }
                ]
            },
            ac: {
                name: "Multi-Split AC",
                icon: "â„ï¸",
                description: "2 indoor units (living + bedroom)",
                topPicks: [
                    { rank: 1, name: "GREE System (QUOTED)", reason: "Best value from quote: â‚¬1,656 total including installation. Local warranty and support from Tim Design." },
                    { rank: 2, name: "Daikin 2MXM50A + 2x FTXM25R", reason: "Best premium: Industry-leading reliability, A++, quiet. Worth the premium for longevity." },
                    { rank: 3, name: "LG MU2R17 + 2x PC09SQ", reason: "Best smart features: ThinQ WiFi app control, A++ efficiency at mid-range price." }
                ],
                options: [
                    { id: "ac-q1", rank: 1, brand: "GREE", model: "GWHD18NK + GWH09AGB + GWH12AGC", price: 1656, store: "Tim Design Quote", url: "#", features: "5.2kW, A++, INCLUDES INSTALLATION, 3-year warranty", isQuoted: true, ratings: { reviews: 4, value: 5, features: 4, connectivity: 3, efficiency: 4 } },
                    { id: "ac-1", rank: 2, brand: "Daikin", model: "2MXM50A + 2x FTXM25R", price: 1850, store: "KlimaTime", url: "https://klimatime.com/en-bg/search?q=2MXM50A", features: "5.0kW, A++, R32, Quiet (equipment only)", ratings: { reviews: 5, value: 4, features: 5, connectivity: 4, efficiency: 5 } },
                    { id: "ac-2", rank: 3, brand: "LG", model: "MU2R17 + 2x PC09SQ", price: 1550, store: "Technopolis", url: "https://www.technopolis.bg/search?text=MU2R17", features: "4.7kW, A++, ThinQ WiFi (equipment only)", ratings: { reviews: 4, value: 4, features: 4, connectivity: 5, efficiency: 4 } },
                    { id: "ac-3", rank: 4, brand: "GREE", model: "GWHD18NK6LO outdoor only", price: 859, store: "Miramax Clima", url: "https://miramax-clima.bg/en/p/outdoor-unit-gree-gwhd18nk6lo-lch-for-2-room-multisplit-system", features: "5.2kW outdoor unit only, A++", ratings: { reviews: 4, value: 5, features: 4, connectivity: 3, efficiency: 4 } },
                    { id: "ac-4", rank: 5, brand: "Samsung", model: "AJ050TXJ2KG + 2x AR09", price: 1650, store: "Technopolis", url: "https://www.technopolis.bg/search?text=AJ050TXJ2KG", features: "5.0kW, A++, Wind-Free (equipment only)", ratings: { reviews: 4, value: 4, features: 5, connectivity: 5, efficiency: 4 } },
                    { id: "ac-5", rank: 6, brand: "Fujitsu", model: "AOYG18KBTA2 + 2x ASYG09", price: 1750, store: "KlimaTime", url: "https://klimatime.com/en-bg/search?q=AOYG18KBTA2", features: "5.4kW, A++, Human sensor (equipment only)", ratings: { reviews: 4.5, value: 4, features: 4, connectivity: 3, efficiency: 5 } },
                    { id: "ac-6", rank: 7, brand: "Toshiba", model: "RAS-2M18U2AVG + 2x RAS-B10", price: 1600, store: "Bittel", url: "https://www.bittel.bg/en/c/air-conditioning/multi-split-systems", features: "5.2kW, A++, Quiet (equipment only)", ratings: { reviews: 4, value: 4, features: 4, connectivity: 3, efficiency: 4 } },
                    { id: "ac-7", rank: 8, brand: "Mitsubishi Electric", model: "MXZ-2F53VF + 2x MSZ-AP25", price: 2040, store: "AC Vent Varna", url: "https://acvent.bg/en/catalog/mitsubishi-electric-mxz-2f53vf-multi-split-system-outdoor-unit/", features: "5.3kW, A+++, R32 (equipment only)", ratings: { reviews: 5, value: 3, features: 5, connectivity: 4, efficiency: 5 } },
                    { id: "ac-8", rank: 9, brand: "Midea", model: "M2OD-18HFN8 + 2x MSMBAU-09", price: 1200, store: "Midea Bulgaria", url: "https://www.midea.bg/en/midea-air-conditioning/midea-multi-split-air-conditioners/", features: "5.3kW, A+, Budget (equipment only)", ratings: { reviews: 3.5, value: 5, features: 3, connectivity: 3, efficiency: 3 } },
                    { id: "ac-9", rank: 10, brand: "Panasonic", model: "CU-2Z50TBE + 2x CS-Z25", price: 1950, store: "KlimaTime", url: "https://klimatime.com/en-bg/search?q=CU-2Z50TBE", features: "5.0kW, A++, nanoe X (equipment only)", ratings: { reviews: 4, value: 3, features: 5, connectivity: 4, efficiency: 5 } }
                ]
            },
            tv: {
                name: "TV",
                icon: "ðŸ“º",
                description: "55\" OLED/QLED for living room",
                topPicks: [
                    { rank: 1, name: "LG OLED55B43LA", reason: "Best OLED value: Perfect blacks, 120Hz, Dolby Vision at â‚¬894. Best picture quality for the price." },
                    { rank: 2, name: "Samsung QE-55QN85D", reason: "Best for bright rooms: Neo QLED, 100Hz, bright panel at â‚¬894. Same price as OLED alternative." },
                    { rank: 3, name: "LG 55QNED86A3A", reason: "Best mid-range: Mini LED evo, 120Hz, good brightness at â‚¬817. Good all-rounder." }
                ],
                options: [
                    { id: "tv-1", rank: 1, brand: "LG", model: "OLED55B43LA", price: 894, store: "Technopolis", url: "https://www.technopolis.bg/search?text=OLED55B43LA", features: "55\", OLED, 120Hz, WebOS, Dolby Vision", ratings: { reviews: 5, value: 5, features: 5, connectivity: 5, efficiency: 3 } },
                    { id: "tv-2", rank: 2, brand: "Samsung", model: "QE-55QN85D", price: 894, store: "Technopolis", url: "https://www.technopolis.bg/en/Televizori/Televizor-SAMSUNG-QE-55QN85D-4K-Ultra-HD-QLED/p/11067", features: "55\", Neo QLED, 100Hz, Tizen", ratings: { reviews: 4.5, value: 5, features: 4, connectivity: 5, efficiency: 4 } },
                    { id: "tv-3", rank: 3, brand: "LG", model: "55QNED86A3A", price: 817, store: "Technopolis", url: "https://www.technopolis.bg/search?text=55QNED86A3A", features: "55\", Mini LED evo AI, 120Hz, WebOS", ratings: { reviews: 4.5, value: 5, features: 4, connectivity: 4, efficiency: 4 } },
                    { id: "tv-4", rank: 4, brand: "Samsung", model: "QE-55LS03D The Frame", price: 868, store: "Technopolis", url: "https://www.technopolis.bg/search?text=QE-55LS03D", features: "55\", QLED, Art Mode, Tizen", ratings: { reviews: 4, value: 4, features: 5, connectivity: 5, efficiency: 4 } },
                    { id: "tv-5", rank: 5, brand: "LG", model: "55QNED70A6A", price: 587, store: "Technopolis", url: "https://www.technopolis.bg/en/Televizori/Televizor-LG-55QNED70A6A-4K-Ultra-HD-QNED/p/14373", features: "55\", QNED, 60Hz, Budget", ratings: { reviews: 4, value: 5, features: 3, connectivity: 4, efficiency: 4 } },
                    { id: "tv-6", rank: 6, brand: "LG", model: "OLED55B53LA", price: 1100, store: "Technopolis", url: "https://www.technopolis.bg/en/Televizori/Televizor-LG-OLED55B53LA-4K-Ultra-HD-OLED/p/13895", features: "55\", OLED, 120Hz, WebOS", ratings: { reviews: 5, value: 4, features: 5, connectivity: 5, efficiency: 3 } },
                    { id: "tv-7", rank: 7, brand: "Samsung", model: "QE-55Q80D", price: 920, store: "Technopolis", url: "https://www.technopolis.bg/en/Televizori/Televizor-SAMSUNG-QE-55Q80D-4K-Ultra-HD-QLED/p/11200", features: "55\", QLED, 120Hz, Full Array", ratings: { reviews: 4.5, value: 4, features: 4, connectivity: 5, efficiency: 4 } },
                    { id: "tv-8", rank: 8, brand: "Samsung", model: "QE-55QN90F", price: 1124, store: "Technopolis", url: "https://www.technopolis.bg/en/Televizori/Televizor-SAMSUNG-QE-55QN90F-4K-Ultra-HD-Neo-QLED-Mini-LED/p/13998", features: "55\", Neo QLED Mini-LED, 165Hz", ratings: { reviews: 4.5, value: 3, features: 5, connectivity: 5, efficiency: 4 } },
                    { id: "tv-9", rank: 9, brand: "Philips", model: "55OLED808", price: 1300, store: "Technopolis", url: "https://www.technopolis.bg/search?text=55OLED808", features: "55\", OLED, 120Hz, Ambilight", ratings: { reviews: 4, value: 3, features: 5, connectivity: 4, efficiency: 3 } },
                    { id: "tv-10", rank: 10, brand: "Sony", model: "XR-55A80L", price: 1800, store: "Technopolis", url: "https://www.technopolis.bg/search?text=XR-55A80L", features: "55\", OLED, 120Hz, Acoustic Surface", ratings: { reviews: 5, value: 2, features: 5, connectivity: 4, efficiency: 3 } }
                ]
            }
        };

        const selections = {};
        const skipped = new Set();

        function createElement(tag, className, textContent) {
            const el = document.createElement(tag);
            if (className) el.className = className;
            if (textContent) el.textContent = textContent;
            return el;
        }

        function renderStars(score) {
            const full = Math.floor(score);
            const half = score % 1 >= 0.5 ? 1 : 0;
            return 'â˜…'.repeat(full) + (half ? 'Â½' : '') + 'â˜†'.repeat(5 - full - half);
        }

        function createRatingBadge(label, score) {
            const badge = createElement('div', 'rating-badge');
            badge.appendChild(createElement('span', 'label', label + ':'));
            badge.appendChild(createElement('span', 'rating-stars', renderStars(score)));
            badge.appendChild(createElement('span', 'score', score.toFixed(1)));
            return badge;
        }

        function createTopPicksSection(picks) {
            const section = createElement('div', 'top-picks');
            section.appendChild(createElement('h4', '', 'Top 3 Recommendations'));
            
            picks.forEach(function(pick, idx) {
                const item = createElement('div', 'pick-item');
                const header = createElement('div', 'pick-header');
                const rankClass = idx === 0 ? 'gold' : (idx === 1 ? 'silver' : 'bronze');
                const rankEl = createElement('span', 'pick-rank ' + rankClass, '#' + pick.rank);
                header.appendChild(rankEl);
                header.appendChild(createElement('span', '', pick.name));
                item.appendChild(header);
                item.appendChild(createElement('div', 'pick-reason', pick.reason));
                section.appendChild(item);
            });
            
            return section;
        }

        function createOptionElement(categoryKey, opt, isSelected) {
            var optClasses = 'option';
            if (isSelected) optClasses += ' selected';
            if (opt.isQuoted) optClasses += ' quoted';
            const optionDiv = createElement('div', optClasses);
            
            const mainDiv = createElement('div', 'option-main');
            
            const radio = document.createElement('input');
            radio.type = 'radio';
            radio.name = categoryKey;
            radio.checked = isSelected;
            
            const infoDiv = createElement('div', 'option-info');
            
            const headerDiv = createElement('div', 'option-header');
            const rankClass = opt.rank === 1 ? 'top1' : (opt.rank === 2 ? 'top2' : (opt.rank === 3 ? 'top3' : ''));
            headerDiv.appendChild(createElement('span', 'option-rank ' + rankClass, '#' + opt.rank));
            if (opt.isQuoted) {
                headerDiv.appendChild(createElement('span', 'quoted-tag', 'Quoted'));
            }
            headerDiv.appendChild(createElement('span', 'option-brand', opt.brand));
            
            infoDiv.appendChild(headerDiv);
            infoDiv.appendChild(createElement('div', 'option-model', opt.model));
            infoDiv.appendChild(createElement('div', 'option-features', opt.features));
            
            const rightDiv = createElement('div', 'option-right');
            const priceStoreDiv = document.createElement('div');
            priceStoreDiv.appendChild(createElement('div', 'option-price', 'â‚¬' + opt.price));
            priceStoreDiv.appendChild(createElement('div', 'option-store', opt.store));
            rightDiv.appendChild(priceStoreDiv);
            
            if (!opt.isQuoted && opt.url !== '#') {
                const buyLink = createElement('a', 'option-link', 'Buy');
                buyLink.href = opt.url;
                buyLink.target = '_blank';
                buyLink.rel = 'noopener';
                buyLink.addEventListener('click', function(e) { e.stopPropagation(); });
                rightDiv.appendChild(buyLink);
            }
            
            mainDiv.appendChild(radio);
            mainDiv.appendChild(infoDiv);
            mainDiv.appendChild(rightDiv);
            
            optionDiv.appendChild(mainDiv);
            
            if (opt.ratings) {
                const ratingsDiv = createElement('div', 'ratings');
                ratingsDiv.appendChild(createRatingBadge('Reviews', opt.ratings.reviews));
                ratingsDiv.appendChild(createRatingBadge('Value', opt.ratings.value));
                ratingsDiv.appendChild(createRatingBadge('Features', opt.ratings.features));
                ratingsDiv.appendChild(createRatingBadge('Connect', opt.ratings.connectivity));
                ratingsDiv.appendChild(createRatingBadge('Efficiency', opt.ratings.efficiency));
                optionDiv.appendChild(ratingsDiv);
            }
            
            optionDiv.addEventListener('click', function() {
                selectOption(categoryKey, opt.id);
            });
            
            return optionDiv;
        }

        function createCategoryElement(key, category) {
            const categoryDiv = createElement('div', 'category');
            categoryDiv.id = 'category-' + key;
            
            const selected = selections[key];
            const isSkipped = skipped.has(key);
            let selectedText = 'Not selected';
            if (selected) {
                selectedText = 'â‚¬' + selected.price;
            } else if (isSkipped) {
                selectedText = 'Skipped';
            }
            
            const headerDiv = createElement('div', 'category-header');
            const titleDiv = createElement('div', 'category-title');
            titleDiv.appendChild(createElement('span', 'icon', category.icon));
            titleDiv.appendChild(createElement('span', '', category.name));
            
            const rightHeaderDiv = document.createElement('div');
            rightHeaderDiv.style.cssText = 'display: flex; align-items: center; gap: 1rem;';
            rightHeaderDiv.appendChild(createElement('span', 'category-selected', selectedText));
            rightHeaderDiv.appendChild(createElement('span', 'category-arrow', 'â–¼'));
            
            headerDiv.appendChild(titleDiv);
            headerDiv.appendChild(rightHeaderDiv);
            headerDiv.addEventListener('click', function() { toggleCategory(key); });
            
            const contentDiv = createElement('div', 'category-content');
            contentDiv.appendChild(createElement('p', 'category-desc', category.description));
            
            if (category.topPicks) {
                contentDiv.appendChild(createTopPicksSection(category.topPicks));
            }
            
            const skipBtn = createElement('button', 'skip-btn' + (isSkipped ? ' active' : ''), isSkipped ? 'âœ“ Skipped' : 'Skip this category');
            skipBtn.addEventListener('click', function() { toggleSkip(key); });
            contentDiv.appendChild(skipBtn);
            
            var sortedOptions = category.options.slice().sort(function(a, b) { return a.rank - b.rank; });
            
            sortedOptions.forEach(function(opt) {
                const isSelected = selections[key] && selections[key].id === opt.id;
                contentDiv.appendChild(createOptionElement(key, opt, isSelected));
            });
            
            categoryDiv.appendChild(headerDiv);
            categoryDiv.appendChild(contentDiv);
            
            return categoryDiv;
        }

        function renderCategories() {
            const app = document.getElementById('app');
            const openCategories = [];
            const legend = app.querySelector('.legend');
            
            document.querySelectorAll('.category.open').forEach(function(el) {
                openCategories.push(el.id);
            });
            
            while (app.firstChild) {
                app.removeChild(app.firstChild);
            }
            
            if (legend) {
                app.appendChild(legend);
            } else {
                const newLegend = createElement('div', 'legend');
                newLegend.appendChild(createElement('h3', '', 'Legend'));
                const item1 = createElement('div', 'legend-item');
                const color1 = createElement('div', 'legend-color quoted');
                item1.appendChild(color1);
                item1.appendChild(createElement('span', '', 'Quoted by Tim Design (local company baseline)'));
                const item2 = createElement('div', 'legend-item');
                const color2 = createElement('div', 'legend-color regular');
                item2.appendChild(color2);
                item2.appendChild(createElement('span', '', 'Other options from Bulgarian retailers'));
                newLegend.appendChild(item1);
                newLegend.appendChild(item2);
                app.appendChild(newLegend);
            }

            Object.keys(applianceData).forEach(function(key) {
                const categoryEl = createCategoryElement(key, applianceData[key]);
                if (openCategories.indexOf('category-' + key) !== -1) {
                    categoryEl.classList.add('open');
                }
                app.appendChild(categoryEl);
            });

            updateTotal();
        }

        function toggleCategory(key) {
            document.getElementById('category-' + key).classList.toggle('open');
        }

        function selectOption(categoryKey, optionId) {
            const category = applianceData[categoryKey];
            const option = category.options.find(function(o) { return o.id === optionId; });
            selections[categoryKey] = option;
            skipped.delete(categoryKey);
            
            const categoryEl = document.getElementById('category-' + categoryKey);
            const wasOpen = categoryEl.classList.contains('open');
            
            renderCategories();
            
            if (wasOpen) {
                document.getElementById('category-' + categoryKey).classList.add('open');
            }
        }

        function toggleSkip(key) {
            if (skipped.has(key)) {
                skipped.delete(key);
            } else {
                skipped.add(key);
                delete selections[key];
            }
            
            const categoryEl = document.getElementById('category-' + key);
            const wasOpen = categoryEl.classList.contains('open');
            
            renderCategories();
            
            if (wasOpen) {
                document.getElementById('category-' + key).classList.add('open');
            }
        }

        function updateTotal() {
            let total = 0;
            let count = 0;
            Object.keys(selections).forEach(function(key) {
                if (selections[key]) {
                    total += selections[key].price;
                    count++;
                }
            });
            const totalCategories = Object.keys(applianceData).length;
            
            document.getElementById('totalAmount').textContent = 'â‚¬' + total.toLocaleString();
            document.getElementById('selectedCount').textContent = count + ' of ' + totalCategories + ' selected';
        }

        renderCategories();
    </script>
</body>
</html>
